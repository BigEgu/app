<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
    <meta name="description" content="Free Web tutorials">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <meta name="author" content="John Doe">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" type="image/png" href="http://localhost/mini_app/img/favicon.png">
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<script src="https://js.stripe.com/v3/"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto:700" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:500" rel="stylesheet">
  	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script type="text/javascript" src=".././push_config/push.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script src="http://localhost/mini_app/push_config/firebase_notifications.js"></script>
	<title>RipeFunnel</title>
		<style>
	*{
		padding: 0;
		margin: 0;
	}
	.wrapper{
		width: 100%;
		height: 657px;
		padding: 0;
		margin: 0;
		background-color: #e3e8ee;
	}
	/* The Modal (background) */
	.modal {
	    display: none; /* Hidden by default */
	    position: fixed; /* Stay in place */
	    z-index: 1; /* Sit on top */
	    padding-top: 100px; /* Location of the box */
	    left: 0;
	    top: 0;
	    width: 100%; /* Full width */
	    height: 100%; /* Full height */
	    overflow: auto; /* Enable scroll if needed */
	    background-color: rgb(0,0,0); /* Fallback color */
	    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
	}

	/* Modal Content */
	.modal-content {
	    background-color: #fefefe;
	    margin: auto;
	    padding: 20px;
	    border: 1px solid #888;
	    width: 35%;
	    text-align: left;
	}

	/* The Close Button */
	.close {
	    color: #aaaaaa;
	    float: right;
	    font-size: 28px;
	    font-weight: bold;
	}

	.close:hover,
	.close:focus {
	    color: #000;
	    text-decoration: none;
	    cursor: pointer;
	}
	#myBtn:hover{
		text-decoration: none!important;
		cursor: pointer;
	}
	header{
		width: 100%;
		height: 68px;
		border-bottom: 1px solid #f2f2f2;
		padding-top: 7px;
		padding-bottom: 7px;
		margin: 0;
	}
	#notify_me{
		transition: 3s;
	}
	#user_pic{
		height: 80%;
		border-radius: 50%;
		border: 1px solid #f2f2f2;
		margin-top: 3px;
		padding: 0;
		cursor: pointer;
	}
	.count{
		position: absolute; 
		top: -13px!important; 
		left: -7px!important;
		padding-left: 3px;
		padding-right: 3px;
		border-radius: 3px;
		margin: 0;
	}
	.cart{
		position: absolute; 
		top: -13px!important; 
		left: -5px!important;
		padding-left: 3px;
		padding-right: 3px;
		border-radius: 3px;
		margin: 0;
	}
	.user_details{
		height: 100%;
		width: 29%;
		float: right;
		list-style-type: none;
	}
	#notifications{
		color: #a3a3a3;
		padding: 0;
		margin: 0;
	}
	.count{
		position: absolute;
		left: -4px;
		top: -6px;
		z-index: 10;
		margin: 0;
	}
	.dropdown{
		width: 42px; 
		margin-right: 0px; 
		cursor: pointer; 
		text-align: center;
	}
	.btn{
		width: 100%;
		background-color: white;
		border: 0;
		padding: 0;
		margin: 0;
	}
	.btn:hover{
		background-color: #fff; 
	}
	.btn:focus{
		background-color: #fff!important; 
	}
	.btn:active{
		background-color: #fff!important; 
	}
	.dropdown-menu{
		list-style-type: none;
		width: 290px!important;
		height: 300px!important;
		overflow: auto;
		position: absolute!important;
		top: 56px!important;
		left: -243px!important;
		background-color: #ffffff;
		border-left: 1px solid #f2f2f2;
		border-right: 1px solid #f2f2f2;
		border-bottom: 1px solid #f2f2f2;
		display: none;
		padding: 0;
		margin: 0;
	}
	.dropdown-menu a{
		display: block;
		width: 100%;
		padding-top: 8px;
		padding-left: 10px;
		padding-bottom: 8px;
		margin: 0;
		border-bottom: 1px solid #f2f2f2;
	}
	.user_details li{
		float: right;
		height: 100%;
	}
	.user_details li i{
		line-height: 50px;
		font-size: 23px;
		padding: 0;
		margin-right: 8px;
	}
	.bottom_navbar{
		width: 60%;
		overflow: auto;
		position: fixed;
		bottom: 0;
		padding: 0;
		margin: 0;
		background-color: #fff;
		visibility: hidden;
	}
	.bottom_navbar a{
		float: left;
		width: 20%;
		padding-top: 8px;
		padding-bottom: 8px;
		font-size: 21px;
		margin: 0;
		color: #707070;
	}
	.active{
		color: #000!important;
	}
	input:focus, button:focus {
       outline: 0;
       transition: .5s;
	}
	aside{
		height: 100%;
		width: 110px;
		position: fixed;
		left: 0;
		padding-top: 30px;
		margin: 0;
		background: transparent linear-gradient(80deg, #0b4182 1%, #1a78cf 99%) repeat scroll 0% 0%;
	}
	.top_navbar{
		overflow: auto;
		padding: 0;
		margin-top: 51px;
	}
	.top_navbar a{
		display: block;
		padding: 0;
		overflow: auto;
		width: 100%;
		margin-bottom: 30px;
		color: #a1c8ee;
		transition: .3s;
		letter-spacing: -0.1px;
	}
	.top_navbar a:hover{
		color: #fff;
		text-decoration: none;
	}
	.top_navbar a .label_logo{
		font-size: 25px;
		padding-bottom: 3px;
		margin: 0;
	}
	.top_navbar a .link_label{
		font-weight: 700;
		font-size: 15px;
		padding: 0;
		margin: 0;
	}
	.top_navbar_active{
		color: #ffffff!important;
	}
	#logo{
		height: 38px;
		margin: 0;
		padding: 0;
	}
	.container{
		width: 1255px;
		height: 100%;
		background-color: #fff;
		float: right;
		padding-left: 20px;
		padding-right: 20px;
	}
	.left{
		position: absolute;
		right: 0;
		top: 448px;
		margin: 0;
		padding: 0;
		font-size: 29px!important;
		color: #fff;
	}
	.my_details{
		width: 31%;
		text-align: left;
	}
	#full{
		width: 100%;
		margin: 0;
		border: 1px solid #DCDEE0;
	    vertical-align: middle;
	    border-radius: 3px;
	    height: 50px;
	    padding: 0px 16px;
	    font-size: 14px;
	    color: #555555;
	    background-color: #ffffff;
		float: left;
	}
	#user_email{
		width: 100%;
		margin-top: 9px;
		border: 1px solid #DCDEE0;
	    vertical-align: middle;
	    border-radius: 3px;
	    height: 50px;
	    padding: 0px 16px;
	    font-size: 14px;
	    color: #555555;
	    background-color: #dddd;
		float: left;
	}
	#website{
		width: 100%;
		margin-top: 9px;
		border: 1px solid #DCDEE0;
	    vertical-align: middle;
	    border-radius: 3px;
	    height: 50px;
	    padding: 0px 16px;
	    font-size: 14px;
	    color: #555555;
	    background-color: #ffffff;
		float: left;
	}
	#update_btn{
		width: 100%;
		border: 0;
		margin-top: 9px;
		height: 45px;
	    padding: 0px 16px;
		background: transparent linear-gradient(80deg, #0b4182 1%, #1a78cf 99%) repeat scroll 0% 0%;
		color: white;
		font-weight: 700;
		font-size: 16px;
		border-radius: 3px;
	}
	/* Switches */
	.switch_container{
		width: 100%;
		height: 50px;
		padding: 0;
		margin: 0;
	}
	.switch {
	  position: relative;
	  width: 54px;
	  height: 30px;
	  float: left;
	  margin: 0;
	  padding: 0;
	}

	.switch input { 
	  opacity: 0;
	  width: 0;
	  height: 0;
	  margin: 0;
	}

	.slider {
	  position: absolute;
	  cursor: pointer;
	  top: 0;
	  left: 0;
	  right: 0;
	  bottom: 0;
	  background-color: #ccc;
	  -webkit-transition: .4s;
	  transition: .4s;
	}

	.slider:before {
	  position: absolute;
	  content: "";
	  height: 23px;
	  width: 23px;
	  left: 4px;
	  bottom: 4px;
	  background-color: white;
	  -webkit-transition: .4s;
	  transition: .4s;
	}

	input:checked + .slider {
	  background-color: #2196F3;
	}

	input:focus + .slider {
	  box-shadow: 0 0 1px #2196F3;
	}

	input:checked + .slider:before {
	  -webkit-transform: translateX(26px);
	  -ms-transform: translateX(26px);
	  transform: translateX(26px);
	}

	/* Rounded sliders */
	.slider.round {
	  border-radius: 34px;
	}

	.slider.round:before {
	  border-radius: 50%;
	}
	@media screen and (max-width: 768px) {
	.wrapper{
		width: 100%;
		height: 100%;
	}
	.bottom_navbar{
		width: 100%;
		visibility: visible;
	}
	aside{
		visibility: hidden;
	}
	.user_details{
		height: 100%;
		width: 39%;
		float: right;
		list-style-type: none;
	}
	.container{
		width: 100%;
		height: 100%;
		background-color: #fff;
		float: right;
		padding: 0;
	}
   }

</style>
</head>
<body>
	<center>
		<div id="myModal" class="modal">

		  <!-- Modal content -->
		  <div class="modal-content">
		    <span class="close">&times;</span>
		    <h2 style="padding: 0; margin: 0;">Turn off web notifications</h2>
		    <h3 style="padding: 0; margin-top: 3px; font-size: 14px; color: #b2b2b2;">Google Chrome</h3>
		    <ol style="padding-left: 10px;">
			  <li>On your computer, open Chrome.</li>
			  <li>At the top right, click More&nbsp;<img src="//storage.googleapis.com/support-kms-prod/ArAlBcUAe8h1l5m69uxnwElxkqwW0QdtIc3F" width="18" height="18" alt="More" title="More">&nbsp;<img src="//lh3.googleusercontent.com/nHFGZ_9xjCh-mP83zMzXQVJF5VYf2n6kwoBIxB2zv3V4VPT4gNTtBye8lYznogLqLPY=w13-h18" width="13" height="18" alt="and then" title="and then">&nbsp;<strong>Settings</strong>.</li>
			  <li>At the bottom, click <strong>Advanced</strong>.</li>
			  <li>Under "Privacy and security," click <strong>Content settings</strong>.</li>
			  <li>Click <strong>Notifications</strong>.&nbsp;</li>
			  <li>Search for the allowed section:
			    <ul>
			      <li>Look for the (App name) listing.</li>
			      <li>On the right, click More&nbsp;<img src="//storage.googleapis.com/support-kms-prod/ArAlBcUAe8h1l5m69uxnwElxkqwW0QdtIc3F" width="18" height="18" alt="More" title="More">&nbsp;<img src="//lh3.googleusercontent.com/nHFGZ_9xjCh-mP83zMzXQVJF5VYf2n6kwoBIxB2zv3V4VPT4gNTtBye8lYznogLqLPY=w13-h18" width="13" height="18" alt="and then" title="and then">&nbsp;<strong>Remove</strong>.</li>
			    </ul>
			  </li>
			</ol>
		  </div>

		</div>
	  <div class="wrapper">
	  	<aside>
	  		<img src="http://localhost/mini_app/img/logo.png" id="logo">
	  		<ul class="top_navbar">
	  			<a href="http://localhost/mini_app/app">
	  				<div class="label_logo"><i class="fa fa-globe-americas"></i></div>
	  				<i class="fa fa-caret-left left"></i>
	  				<div class="link_label"><span>Servers</span></div>
	  			</a>
	  			<a href="http://localhost/mini_app/shop">
	  				<div class="label_logo"><i class="fa fa-shopping-cart"></i></div>
	  				<div class="link_label">Shop</div>
	  			</a>
	  			<a href="http://localhost/mini_app/billing">
	  				<div class="label_logo"><i class="fa fa-credit-card"></i></div>
	  				<div class="link_label">Billing</div>
	  			</a>
	  			<a href="http://localhost/mini_app/business">
	  				<div class="label_logo"><i class="fa fa-store"></i></div>
	  				<div class="link_label">Business</div>
	  			</a>
	  			<a href="http://localhost/mini_app/account" class="top_navbar_active">
	  				<div class="label_logo"><i class="fa fa-user"></i></div>
	  				<div class="link_label">Account</div>
	  			</a>
	  		</ul>
	  	</aside>
	  	<div class="container">
	  		
	  		<header>
	  			<ul class="user_details">
	  			<li><img id="user_pic"></li>
			    <li class="dropdown" onclick="window.location = 'cart.php';">
			    <button class="btn btn-primary" type="button"><i class="fa fa-shopping-bag" id="notifications"></i><span class="label label-pill label-danger cart" id="cart">
			    	<?php
			    	if (!empty($_SESSION['shopping_cart'])) {
						echo count($_SESSION['shopping_cart']); 
					}else{
						echo "<script>document.getElementById('cart').style.visibility = 'hidden';</script>";
					}
			    	?>
			    	</span>
			    </button></li>
  				<li class="dropdown">
			    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-bell" id="notifications"></i><span class="label label-pill label-danger count"></span></button>
			    <ul class="dropdown-menu">
			      <div style="text-align: left; width: 100%; overflow: auto; padding-top: 10px; padding-left: 10px; padding-bottom: 10px; color: #000; font-weight: 700; border-bottom: 1px solid #f2f2f2;">Notifications</div>
			      <span class="notify_menu"></span>
			      <div style="text-align: center; width: 100%; overflow: auto; padding-top: 10px; padding-bottom: 10px; color: #0645AD;">See all</div>
				    </ul>
			     </li>
	  	      </ul>
		     </li>
	  	      </ul>
	  		</header>
	  		<div class="my_details">
	  			<h3 style="font-size: 20px;
    line-height: 28px;
    margin: 12px 0px 12px 0px;
    color: #363B40;
    font-weight: 500;">Your Details</h3>
		<input type="text" id="full" placeholder="Full Name"><br>
		<input type="email" id="user_email" placeholder="Email Address" disabled><br>
		<input type="text" id="website" placeholder="Website (optional)"><br>
		<button id="update_btn" onclick="update();">Save Details</button>
		<h3 style="font-size: 20px;
    line-height: 28px;
    margin: 32px 0px 12px 0px;
    color: #363B40;
    font-weight: 500;">Notifications</h3>
    <div class="switch_container">
    	<p style="font-size: 16px; font-weight: 700; color: #000; float: left; position: relative; top: 4px; margin-right: 3px;" id="switch">Turn on web notifications</p>
  <label class="switch">
  <input type="checkbox" onclick="toggle();" id="switch_btn">
  <span class="slider round"></span>
</label>
    </div>
<p>If you wish to learn how to turn off notifications for<br> Google Chrome, <a  id="myBtn">click here</a>.</p>
	<span id="notify_me"></span>
	  </div>
  </div>
	  	<ul class="bottom_navbar">
	  	<a href="#" class="active"><i class="fa fa-home"></i></a>
	  	<a href="#"><i class="fa fa-credit-card"></i></a>
	  	<a href="#"><i class="fa fa-plus-square"></i></a>
	  	<a href="#"><i class="fa fa-store"></i></a>
	  	<a href="#"><i class="fa fa-user"></i></a>
	  </ul>
	 </div><!-- Wrapper -->
	</center>
	<script>
 firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
  	document.getElementById('full').setAttribute("value", user.displayName);
    document.getElementById('user_email').setAttribute("value", user.email);
  }else{
  	console.log('n');
  }
});
  var toggled = true;
  var permission = Push.Permission.has();
  if (permission == true) {
  	document.getElementById('switch_btn').setAttribute("checked", true);
  }
  if (permission == false) {    
  	document.getElementById('switch_btn').setAttribute("checked", false);
 }
  function toggle() {
  if (!toggled) {
  	toggled = true;  	
  	console.log('Not Toggled');
  	return;
  }
  if (toggled) {
  	toggled = false;
  	Notification.requestPermission();
  	console.log('Toggled');
  	return;
  }
}

function update() {
var user = firebase.auth().currentUser;
var name = document.getElementById('full').value;
user.updateProfile({
  displayName: name
}).then(function() {
  swal("success", "Profile updated", "success");
}).catch(function(error) {
  // An error happened.
});
}
 
// Get the modal
var modal = document.getElementById('myModal');

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
</script>
</body>
</html>
